<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ORLEN</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:Arial; }

/* MENU */
#menu {
position:absolute;
width:100%;
height:100%;
background:radial-gradient(circle, #200000, #000);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
color:white;
z-index:10;
}

#title {
font-size:80px;
letter-spacing:12px;
text-shadow:0 0 25px red;
}

#play {
margin-top:40px;
padding:20px 60px;
font-size:22px;
cursor:pointer;
background:red;
border:none;
color:white;
}

#credits {
position:absolute;
right:30px;
bottom:30px;
padding:10px 20px;
background:#111;
border:1px solid red;
color:white;
cursor:pointer;
}

/* HUD */
#hud {
position:absolute;
top:20px;
left:20px;
color:white;
z-index:5;
font-size:18px;
text-shadow:0 0 5px black;
display:none;
}

/* CROSSHAIR */
#crosshair {
position:absolute;
top:50%;
left:50%;
width:20px;
height:20px;
transform:translate(-50%,-50%);
pointer-events:none;
z-index:5;
}
#crosshair:before, #crosshair:after {
content:"";
position:absolute;
background:yellow;
}
#crosshair:before {
width:20px; height:2px; top:9px; left:0;
}
#crosshair:after {
width:2px; height:20px; top:0; left:9px;
}
</style>
</head>
<body>

<div id="menu">
<div id="title">ORLEN    version pr√©-alpha 0.3</div>
<button id="play" onclick="startGame()">JOUER</button>
<button id="credits">CR√âDITS<br>Yotvin</button>
</div>

<div id="hud">
‚ù§Ô∏è Vie: <span id="hp">100</span><br>
üî´ Balles: <span id="ammo">30</span>
</div>

<div id="crosshair"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>

<script>
let scene, camera, renderer;
let player, velocityY = 0;
let enemies = [];
let bullets = [];

let hp = 100;
let ammo = 30;
let isDead = false;

const GRAVITY = -0.02;
const FLOOR_Y = 2;

let move = {f:false,b:false,l:false,r:false};
let yaw=0, pitch=0;

function startGame(){
menu.style.display="none";
hud.style.display="block";
init();
animate();
}

function init(){
scene = new THREE.Scene();
scene.background = new THREE.Color(0x222222);

camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);

renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// PLAYER BODY (invisible)
player = new THREE.Object3D();
player.position.y = FLOOR_Y;
scene.add(player);
player.add(camera);

// LIGHTS
scene.add(new THREE.AmbientLight(0xffffff,0.4));
let sun = new THREE.DirectionalLight(0xffffff,1);
sun.position.set(50,100,50);
scene.add(sun);

// FLOOR
let floor = new THREE.Mesh(
new THREE.PlaneGeometry(1000,1000),
new THREE.MeshStandardMaterial({color:0x111111})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

// ENEMIES
for(let i=0;i<5;i++) spawnEnemy();

// INPUT
document.body.addEventListener("click", ()=>document.body.requestPointerLock());

document.addEventListener("mousemove", e=>{
if(document.pointerLockElement){
yaw -= e.movementX*0.002;
pitch -= e.movementY*0.002;
pitch = Math.max(-1.4, Math.min(1.4,pitch));
camera.rotation.set(pitch,yaw,0);
}
});

document.addEventListener("keydown",e=>{
if(e.key=="z") move.f=true;
if(e.key=="s") move.b=true;
if(e.key=="q") move.l=true;
if(e.key=="d") move.r=true;
});

document.addEventListener("keyup",e=>{
if(e.key=="z") move.f=false;
if(e.key=="s") move.b=false;
if(e.key=="q") move.l=false;
if(e.key=="d") move.r=false;
});

document.addEventListener("mousedown",shoot);
}

function spawnEnemy(){
let e = new THREE.Group();
e.userData.hp = 10;

// HUMANOID (tr√®s grand)
let torso = new THREE.Mesh(
new THREE.BoxGeometry(3,8,2),
new THREE.MeshStandardMaterial({color:0x000000})
);
e.add(torso);

let head = new THREE.Mesh(
new THREE.BoxGeometry(2,2,2),
new THREE.MeshStandardMaterial({color:0x000000})
);
head.position.y = 5;
e.add(head);

// YEUX
for(let i=0;i<3;i++){
let eye = new THREE.Mesh(
new THREE.SphereGeometry(0.3),
new THREE.MeshBasicMaterial({color:0xff0000})
);
eye.position.set(-0.5+i*0.5,5,1.1);
e.add(eye);
}

e.position.set(Math.random()*200-100,4,Math.random()*200-100);
scene.add(e);
enemies.push(e);
}

function shoot(){
if(ammo<=0 || isDead) return;
ammo--;
ammoSpan.innerText=ammo;

// BULLET
let bullet = new THREE.Mesh(
new THREE.SphereGeometry(0.15),
new THREE.MeshBasicMaterial({color:0xffff00})
);
bullet.position.copy(camera.getWorldPosition(new THREE.Vector3()));
bullet.userData.dir = new THREE.Vector3();
camera.getWorldDirection(bullet.userData.dir);
scene.add(bullet);
bullets.push(bullet);
}

function animate(){
requestAnimationFrame(animate);
if(isDead) return;

// GRAVITY
velocityY += GRAVITY;
player.position.y += velocityY;
if(player.position.y < FLOOR_Y){
player.position.y = FLOOR_Y;
velocityY = 0;
}

// MOVE
let speed=0.6;
if(move.f) player.translateZ(-speed);
if(move.b) player.translateZ(speed);
if(move.l) player.translateX(-speed);
if(move.r) player.translateX(speed);

// BULLETS
bullets.forEach((b,i)=>{
b.position.add(b.userData.dir.clone().multiplyScalar(2));
enemies.forEach((e)=>{
if(b.position.distanceTo(e.position)<2){
e.userData.hp--;
scene.remove(b);
bullets.splice(i,1);
if(e.userData.hp<=0){
scene.remove(e);
enemies.splice(enemies.indexOf(e),1);
spawnEnemy();
}
}
});
});

// ENEMIES
enemies.forEach(e=>{
e.lookAt(player.position);
e.position.x += (player.position.x-e.position.x)*0.01;
e.position.z += (player.position.z-e.position.z)*0.01;

if(e.position.distanceTo(player.position)<3){
hp -= 0.3;
hp = Math.max(0,hp);
hpSpan.innerText=Math.floor(hp);
if(hp<=0) isDead=true;
}
});

renderer.render(scene,camera);
}
</script>

</body>
</html>
